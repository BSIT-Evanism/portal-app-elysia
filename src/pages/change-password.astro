---
import { actions } from "astro:actions";
import Layout from "../layouts/Layout.astro";
import { isInputError } from "astro:actions";
import ChangePasswordComp from "@/components/ChangePasswordComp";

const result = Astro.getActionResult(actions.changePassword);

const inputErrors = isInputError(result?.error) ? result.error.fields : {};
---

<Layout title="Change Password">
    <!-- <div class="min-h-screen flex items-center justify-center bg-gray-50">
        <div
            class="max-w-md w-full space-y-8 p-8 bg-white rounded-xl shadow-lg"
        >
            <div>
                <h2
                    class="mt-6 text-center text-3xl font-extrabold text-gray-900"
                >
                    Change Password
                </h2>
                <p class="mt-2 text-center text-sm text-gray-600">
                    Enter your current password and new password below
                </p>
            </div>
            <form
                class="mt-8 space-y-6"
                id="changePasswordForm"
                action={actions.changePassword}
                method="post"
            >
                <div class="rounded-md shadow-sm space-y-4">
                    <div>
                        <label for="currentPassword" class="sr-only"
                            >Current Password</label
                        >
                        <input
                            id="currentPassword"
                            name="currentPassword"
                            type="password"
                            required
                            class="appearance-none rounded-lg relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-red-500 focus:border-red-500 focus:z-10 sm:text-sm"
                            placeholder="Current Password"
                            aria-describedby="current-password-error"
                        />
                        {
                            inputErrors?.currentPassword && (
                                <p
                                    class="mt-2 text-sm text-red-600"
                                    id="current-password-error"
                                >
                                    {inputErrors.currentPassword}
                                </p>
                            )
                        }
                    </div>
                    <div>
                        <label for="newPassword" class="sr-only"
                            >New Password</label
                        >
                        <input
                            id="newPassword"
                            name="newPassword"
                            type="password"
                            required
                            class="appearance-none rounded-lg relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-red-500 focus:border-red-500 focus:z-10 sm:text-sm"
                            placeholder="New Password"
                            aria-describedby="new-password-error"
                        />
                        {
                            inputErrors?.newPassword && (
                                <p
                                    class="mt-2 text-sm text-red-600"
                                    id="new-password-error"
                                >
                                    {inputErrors.newPassword}
                                </p>
                            )
                        }
                    </div>
                    <div>
                        <label for="confirmPassword" class="sr-only"
                            >Confirm New Password</label
                        >
                        <input
                            id="confirmPassword"
                            name="confirmPassword"
                            type="password"
                            required
                            class="appearance-none rounded-lg relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-red-500 focus:border-red-500 focus:z-10 sm:text-sm"
                            placeholder="Confirm New Password"
                            aria-describedby="confirm-password-error"
                        />
                        {
                            inputErrors?.confirmPassword && (
                                <p
                                    class="mt-2 text-sm text-red-600"
                                    id="confirm-password-error"
                                >
                                    {inputErrors.confirmPassword}
                                </p>
                            )
                        }
                    </div>
                </div>

                <div>
                    <button
                        type="submit"
                        class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500"
                    >
                        Change Password
                    </button>
                </div>
                {
                    result?.data?.success && (
                        <p
                            class="mt-2 text-sm text-green-600"
                            id="success-message"
                        >
                            {result.data.message}
                        </p>
                    )
                }
            </form>
        </div>
    </div> -->
    <ChangePasswordComp client:only="react" />
</Layout>
